<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>é«˜é›„ Â· é™³å…¶é‚å¸‚é•·ä»»å…§æ´»å‹•åœ°åœ–</title>

  <!-- æ‰‹æ©Ÿç‰ˆå¿…è¦ï¼šè®“ç•«é¢ä¸è¦ç¸®æˆè¶…å° -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet åœ°åœ–å¥—ä»¶ -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        "Noto Sans TC", sans-serif;
      background: radial-gradient(
          circle at top left,
          rgba(56, 189, 248, 0.25),
          transparent 55%
        ),
        radial-gradient(
          circle at bottom right,
          rgba(251, 191, 36, 0.16),
          #020617
        );
      color: #e5e7eb;
    }

    a {
      color: #38bdf8;
      text-decoration: none;
    }

    .app {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* ä¸Šæ–¹æ¨™é¡Œåˆ— */
    .header {
      padding: 10px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(148, 163, 184, 0.35);
      backdrop-filter: blur(12px);
      background: rgba(15, 23, 42, 0.86);
    }

    .header-left {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .site-title {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .site-subtitle {
      font-size: 12px;
      color: #9ca3af;
    }

    .badge {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.8);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
    }

    /* ä¸­é–“ä¸»è¦å€å¡Šï¼šå·¦åœ°åœ–å³åˆ—è¡¨ */
    .main {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.6fr);
      min-height: 0; /* è®“å­å…ƒç´  flex æ­£å¸¸æ²å‹• */
    }

    #map {
      height: 100%;
      width: 100%;
    }

    .sidebar {
      padding: 14px 18px 12px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid rgba(148, 163, 184, 0.3);
      background: radial-gradient(
          circle at top right,
          rgba(59, 130, 246, 0.2),
          transparent 55%
        ),
        #020617ee;
    }

    .sidebar-header {
      margin-bottom: 8px;
    }

    .location-name {
      font-size: 17px;
      font-weight: 700;
      color: #fbbf24;
      margin-bottom: 2px;
    }

    .location-type {
      font-size: 13px;
      color: #9ca3af;
    }

    .hint {
      margin-top: 6px;
      font-size: 12px;
      color: #9ca3af;
    }

    .pill-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      cursor: pointer;
      background: rgba(15, 23, 42, 0.6);
      transition: background 0.2s, border-color 0.2s, color 0.2s,
        transform 0.1s;
    }

    .pill:hover {
      transform: translateY(-1px);
      border-color: #38bdf8;
    }

    .pill.active {
      background: linear-gradient(to right, #38bdf8, #facc15);
      color: #020617;
      border-color: transparent;
      font-weight: 600;
    }

    .event-list {
      margin-top: 8px;
      flex: 1;
      overflow-y: auto;
      padding-right: 4px;
    }

    .event-card {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 12px;
      padding: 10px 12px;
      margin-bottom: 10px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.7);
    }

    .event-header {
      display: flex;
      align-items: baseline;
      gap: 6px;
      margin-bottom: 4px;
    }

    .event-date {
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(59, 130, 246, 0.16);
      color: #bfdbfe;
      border: 1px solid rgba(59, 130, 246, 0.35);
    }

    .event-name {
      font-size: 14px;
      font-weight: 600;
    }

    .event-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 6px;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      font-size: 11px;
    }

    .tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #f97316;
    }

    .photo-row {
      margin-top: 6px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(86px, 1fr));
      gap: 6px;
    }

    .photo-thumb {
      position: relative;
      width: 100%;
      padding-bottom: 65%;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid rgba(75, 85, 99, 0.85);
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
    }

    .photo-thumb::after {
      content: "é»æˆ‘æ›æˆæ´»å‹•ç…§ç‰‡";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #e5e7eb;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.85);
      background: linear-gradient(
        to top,
        rgba(15, 23, 42, 0.9),
        rgba(15, 23, 42, 0.3)
      );
    }

    .footer {
      padding: 8px 18px 10px;
      font-size: 11px;
      color: #6b7280;
      border-top: 1px solid rgba(30, 64, 175, 0.7);
      background: rgba(15, 23, 42, 0.92);
    }

    /* Leaflet marker tooltipå­—é«” */
    .marker-label {
      font-size: 12px;
      font-weight: 600;
    }

    /* æ‰‹æ©Ÿ / å¹³æ¿ç‰ˆå‹ */
    @media (max-width: 960px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }

      .main {
        grid-template-columns: 1fr;
        grid-template-rows: minmax(260px, 48vh) minmax(0, 52vh);
      }

      .sidebar {
        border-left: none;
        border-top: 1px solid rgba(148, 163, 184, 0.3);
      }

      .location-name {
        font-size: 16px;
      }

      .event-card {
        padding: 8px 10px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- é ‚éƒ¨æ¨™é¡Œåˆ— -->
    <header class="header">
      <div class="header-left">
        <div class="site-title">KAOHSIUNG EVENTS MAP</div>
        <div class="site-subtitle">
          é™³å…¶é‚å¸‚é•·ä»»å…§ Â· 2020â€“2026 é«˜é›„é‡è¦æ´»å‹•èˆ‡æ¼”å”±æœƒåœ°åœ–
        </div>
      </div>
      <div class="badge">
        <span class="badge-dot"></span>
        <span>äº’å‹•åœ°åœ– Â· é»åœ°æ¨™çœ‹æ´»å‹•</span>
      </div>
    </header>

    <!-- ä¸­é–“ä¸»ç•«é¢ï¼šåœ°åœ– + æ´»å‹•åˆ—è¡¨ -->
    <div class="main">
      <div id="map"></div>

      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="location-name" id="locationName">
            è«‹å…ˆé»åœ°åœ–ä¸Šçš„åœ°é»æ¨™è¨˜
          </div>
          <div class="location-type" id="locationType">
            é«˜é›„æ¸¯ç£ã€éŸ³æ¨‚å ´é¤¨èˆ‡æ´»å‹•å ´åœ°ä¸€è¦½
          </div>
          <div class="hint">
            ğŸ” å°æŠ€å·§ï¼šå¯ä»¥å…ˆé¸å¹´ä»½ï¼Œå†é»åœ°åœ–ä¸Šçš„åœ°é»ï¼Œå°±æœƒåªé¡¯ç¤ºè©²å¹´åº¦çš„æ´»å‹•ã€‚
          </div>

          <!-- å¹´ä»½ç¯©é¸ -->
          <div class="pill-row" id="yearFilters">
            <!-- JS å‹•æ…‹ç”¢ç”Ÿ -->
          </div>
        </div>

        <div class="event-list" id="eventList"></div>
      </aside>
    </div>

    <footer class="footer">
      è³‡æ–™æ•´ç†è‡ª 2020â€“2026 é«˜é›„é‡å¤§æ´»å‹•ï¼šè·¨å¹´ã€ç‡ˆæœƒã€æ¼”å”±æœƒã€IP å±•èˆ‡ç¯€æ…¶æ´»å‹•ã€‚<br />
      åœ°åœ–ï¼šOpenStreetMap + Leafletã€‚åœ°é»åº§æ¨™ç‚ºè¿‘ä¼¼ä½ç½®ï¼Œå¯ä¾éœ€æ±‚å†å¾®èª¿ã€‚
    </footer>
  </div>

  <script>
    // ======== 1. æ´»å‹•è³‡æ–™ï¼ˆä¾åœ°é»åˆ†çµ„ï¼‰ ========
    // photos ç›®å‰æ”¾ç¤ºæ„åœ–ï¼Œä½ ä¹‹å¾Œå¯ä»¥æ›æˆè‡ªå·±çš„æ´»å‹•ç…§ç‰‡ç¶²å€
    const locations = [
      {
        id: "love_river_bay",
        name: "æ„›æ²³ç£",
        type: "æ°´å²¸æ™¯è§€ / æ´»å‹•ä¸»å ´åœ°",
        lat: 22.6178,
        lng: 120.2889,
        events: [
          {
            year: 2020,
            month: "12æœˆ",
            name: "è·¨ç™¾å…‰å¹´è·¨å¹´æ™šæœƒ",
            kind: "ç¯€æ…¶ï¼ˆå¸‚é•·é¦–å ´è·¨å¹´ï¼‰",
            photos: []
          },
          {
            year: 2021,
            month: "05æœˆ",
            name: "é«˜é›„æµ·æ´‹æ´¾å°",
            kind: "æ°´åŸŸä¼‘é–’",
            photos: []
          },
          {
            year: 2022,
            month: "02æœˆ",
            name: "2022 å°ç£ç‡ˆæœƒï¼ˆé›™ä¸»å ´ï¼šè¡›æ­¦ç‡Ÿã€æ„›æ²³ç£ï¼‰",
            kind: "åœ‹éš›ç´šç¯€æ…¶",
            photos: []
          },
          {
            year: 2022,
            month: "08æœˆ",
            name: "å°ç£æ–‡åšæœƒï¼ˆèŠç™‚æ¼‚æ¼‚æ²³ï¼‰",
            kind: "è—æ–‡ IP",
            photos: []
          },
          {
            year: 2024,
            month: "01æœˆ",
            name: "å†¬æ—¥éŠæ¨‚åœ’ï¼ˆé»ƒè‰²å°é´¨å›æ­¸ï¼‰",
            kind: "åœ‹éš›äº®é» IP",
            photos: []
          },
          {
            year: 2025,
            month: "02æœˆ",
            name: "å†¬æ—¥éŠæ¨‚åœ’ï¼ˆå‰ä¼Šå¡å“‡ï¼Œèˆ‡é§äºŒä¸²è¯ï¼‰",
            kind: "ç™‚ç™’ IP å±•",
            photos: []
          }
        ]
      },
      {
        id: "kaohsiung_music_center",
        name: "é«˜é›„æµè¡ŒéŸ³æ¨‚ä¸­å¿ƒï¼ˆé«˜æµï¼‰",
        type: "æµè¡ŒéŸ³æ¨‚å ´é¤¨",
        lat: 22.6169,
        lng: 120.2874,
        events: [
          {
            year: 2020,
            month: "12æœˆ",
            name: "è·¨ç™¾å…‰å¹´è·¨å¹´æ™šæœƒï¼ˆé«˜æµèˆå°ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2021,
            month: "12æœˆ",
            name: "2022 é«˜é›„è·¨å¹´ï¼ˆé›™èˆå°ï¼Œé«˜æµèˆ‡è“¬èŠï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2022,
            month: "08æœˆ",
            name: "å°ç£æ–‡åšæœƒï¼ˆéƒ¨åˆ†å±•å€ï¼‰",
            kind: "è—æ–‡ IP",
            photos: []
          },
          {
            year: 2022,
            month: "10æœˆ",
            name: "Takao Rock æ‰“ç‹—ç¥­",
            kind: "éŸ³æ¨‚ç¥­",
            photos: []
          },
          {
            year: 2024,
            month: "10æœˆ",
            name: "æ‰“ç‹—ç¥­",
            kind: "éŸ³æ¨‚ç¥­",
            photos: []
          },
          {
            year: 2024,
            month: "10æœˆ",
            name: "è¬è–ç¯€å¤§éŠè¡Œï¼ˆèˆ‡å‡¹å­åº•ä¸²è¯ï¼‰",
            kind: "ç¯€æ…¶æ´»å‹•",
            photos: []
          },
          {
            year: 2025,
            month: "10æœˆ",
            name: "2025 æ‰“ç‹—ç¥­",
            kind: "éŸ³æ¨‚ç¥­",
            photos: []
          },
          {
            year: 2026,
            month: "01æœˆ",
            name: "2026 å…ƒæ—¦å‡æ—— / æ™¨æ›¦æ¼”å”±æœƒ",
            kind: "ç¯€æ…¶ï¼‹æ¼”å”±æœƒ",
            photos: []
          }
        ]
      },
      {
        id: "penglai_pier2",
        name: "é§äºŒè—è¡“ç‰¹å€ / è“¬èŠå•†æ¸¯å€",
        type: "æ¸¯å€è—æ–‡åœ’å€",
        lat: 22.6199,
        lng: 120.2817,
        events: [
          {
            year: 2020,
            month: "12æœˆ",
            name: "è·¨ç™¾å…‰å¹´è·¨å¹´æ™šæœƒï¼ˆè“¬èŠå•†æ¸¯å€ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2021,
            month: "12æœˆ",
            name: "2022 é«˜é›„è·¨å¹´ï¼ˆè“¬èŠèˆå°ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2022,
            month: "10æœˆ",
            name: "å°ç£è¨­è¨ˆå±•ï¼ˆè¨­è¨ˆä¸­å³¶ï¼‰",
            kind: "è—æ–‡è¨­è¨ˆå±•",
            photos: []
          },
          {
            year: 2023,
            month: "04æœˆ",
            name: "å¤§æ¸¯é–‹å”± 2023",
            kind: "éŸ³æ¨‚æ…¶å…¸",
            photos: []
          },
          {
            year: 2024,
            month: "12æœˆ",
            name: "é­·é­šéŠæˆ²é€²é§é«˜é›„",
            kind: "åœ‹éš› IP å¿«é–ƒ",
            photos: []
          },
          {
            year: 2025,
            month: "02æœˆ",
            name: "å†¬æ—¥éŠæ¨‚åœ’ï¼ˆå‰ä¼Šå¡å“‡ï¼Œèˆ‡æ„›æ²³ç£ä¸²è¯ï¼‰",
            kind: "ç™‚ç™’ IP å±•",
            photos: []
          },
          {
            year: 2025,
            month: "03æœˆ",
            name: "2025 å¤§æ¸¯é–‹å”±",
            kind: "éŸ³æ¨‚ç¥­",
            photos: []
          }
        ]
      },
      {
        id: "mengshidai",
        name: "å¤¢æ™‚ä»£ / æ™‚ä»£å¤§é“",
        type: "å•†åœˆ / è·¨å¹´å ´åœ°",
        lat: 22.59515,
        lng: 120.30692,
        events: [
          {
            year: 2022,
            month: "12æœˆ",
            name: "2023 è·¨å¹´äºç£æœªä¾†å¸‚",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "12æœˆ",
            name: "2024 è·¨å¹´æ™šæœƒ",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "03æœˆ",
            name: "é«˜é›„æ«»èŠ±å­£ï¼ˆå¤¢æ™‚ä»£ï¼‰",
            kind: "éŸ³æ¨‚ç¥­ / èŠ±å­£æ´»å‹•",
            photos: []
          },
          {
            year: 2024,
            month: "07æœˆ",
            name: "é«˜é›„å•¤é…’éŸ³æ¨‚ç¯€",
            kind: "å•†æ¥­ç¥­å…¸",
            photos: []
          },
          {
            year: 2025,
            month: "03æœˆ",
            name: "2025 é«˜é›„æ«»èŠ±å­£",
            kind: "éŸ³æ¨‚ç¯€",
            photos: []
          },
          {
            year: 2025,
            month: "01æœˆ",
            name: "2025 è·¨å¹´æ™šæœƒ",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2025,
            month: "12æœˆ",
            name: "2026 è·¨å¹´é›„å—¨è¶´ï¼ˆæš–èº«å ´ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          }
        ]
      },
      {
        id: "arena",
        name: "é«˜é›„å·¨è›‹",
        type: "å®¤å…§é«”è‚²é¤¨ / æ¼”å”±æœƒå ´åœ°",
        lat: 22.6692,
        lng: 120.3017,
        events: [
          {
            year: 2023,
            month: "02æœˆ",
            name: "Westlife æ¼”å”±æœƒ",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "02æœˆ",
            name: "Backstreet Boys æ¼”å”±æœƒ",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "04æœˆ",
            name: "å¼µæƒ å¦¹ ASMR æ¼”å”±æœƒ",
            kind: "è¯èªæ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2026,
            month: "01æœˆ",
            name: "Super Junior SS10ï¼ˆé è¨ˆï¼‰",
            kind: "éŸ“æµæ¼”å”±æœƒ",
            photos: []
          }
        ]
      },
      {
        id: "world_games_stadium",
        name: "ä¸–é‹ä¸»å ´é¤¨ï¼ˆåœ‹å®¶é«”è‚²å ´ï¼‰",
        type: "å¤§å‹æˆ¶å¤–æ¼”å”±æœƒå ´åœ°",
        lat: 22.7023,
        lng: 120.2947,
        events: [
          {
            year: 2023,
            month: "03æœˆ",
            name: "BLACKPINK æ¼”å”±æœƒ",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "03æœˆ",
            name: "äº”æœˆå¤© æ¼”å”±æœƒ",
            kind: "è¯èªæ–æ»¾æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "11æœˆ",
            name: "Coldplay æ¼”å”±æœƒ",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "02æœˆ",
            name: "Ed Sheeran ç´…é«®è‰¾å¾·æ¼”å”±æœƒ",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "03æœˆ",
            name: "äº”æœˆå¤©ï¼ˆé«˜é›„æ«»èŠ±å­£ä¸²è¯å ´ï¼‰",
            kind: "è¯èªæ–æ»¾æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "04æœˆ",
            name: "Golden Wave in Taiwan",
            kind: "éŸ“æµæ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "09æœˆ",
            name: "Bruno Mars ç«æ˜Ÿäººå¸ƒé­¯è«¾æ¼”å”±æœƒ",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "11æœˆ",
            name: "Stray Kids ä¸–ç•Œå·¡è¿´æ¼”å”±æœƒ",
            kind: "éŸ“æµæ¼”å”±æœƒ",
            photos: []
          }
        ]
      },
      {
        id: "qijin_beach",
        name: "æ——æ´¥æµ·æ°´æµ´å ´",
        type: "è¦ªå­è§€å…‰ / æµ·é‚Šæ´»å‹•",
        lat: 22.61018,
        lng: 120.2669,
        events: [
          {
            year: 2023,
            month: "08æœˆ",
            name: "æ——æ´¥é¢¨ç®ç¯€",
            kind: "è¦ªå­è§€å…‰",
            photos: []
          },
          {
            year: 2025,
            month: "08æœˆ",
            name: "æ——æ´¥é¢¨ç®ç¯€æš¨æ°£å¢Šæ°´æ¨‚åœ’",
            kind: "æš‘å‡æ´»å‹•",
            photos: []
          }
        ]
      },
      {
        id: "central_park",
        name: "é«˜é›„ä¸­å¤®å…¬åœ’",
        type: "åŸå¸‚ç¶ åœ° / ç¯€æ…¶é»ç‡ˆ",
        lat: 22.6246,
        lng: 120.3006,
        events: [
          {
            year: 2024,
            month: "12æœˆ",
            name: "2025 è–èª•ç”Ÿæ´»ç¯€",
            kind: "ç¯€æ…¶é»ç‡ˆ",
            photos: []
          }
        ]
      },
      {
        id: "kaohsiung_city_hall",
        name: "é«˜é›„å¸‚æ”¿åºœï¼ˆå››ç¶­è¡Œæ”¿ä¸­å¿ƒï¼‰",
        type: "å¸‚åºœå»£å ´ / å…¸ç¦®",
        lat: 22.623,
        lng: 120.314,
        events: [
          {
            year: 2025,
            month: "01æœˆ",
            name: "å…ƒæ—¦å‡æ——ï¼ˆèˆ‡å¤¢æ™‚ä»£è·¨å¹´ä¸²è¯ï¼‰",
            kind: "åœ‹å®¶å…¸ç¦® / å¸‚æ”¿æ´»å‹•",
            photos: []
          }
        ]
      },
      {
        id: "kaohsiung_station",
        name: "é«˜é›„è»Šç«™ï¼ˆå“†å•¦Aå¤¢ç‰¹å±•é å®šåœ°ï¼‰",
        type: "äº¤é€šæ¨ç´ / å±•è¦½",
        lat: 22.6393,
        lng: 120.302,
        events: [
          {
            year: 2025,
            month: "11æœˆ",
            name: "100% å“†å•¦Aå¤¢ç‰¹å±•ï¼ˆé å®šåœ°é»ï¼‰",
            kind: "IP ç‰¹å±•",
            photos: []
          }
        ]
      },
      {
        id: "meilong_mn",
        name: "ç¾æ¿ƒå®¢å®¶æ–‡ç‰©é¤¨",
        type: "å®¢åº„æ™¯é» / æ–‡åŒ–é¤¨",
        lat: 22.9005,
        lng: 120.542,
        events: [
          {
            year: 2020,
            month: "10æœˆ",
            name: "å¥½å®¢æ—…éŠå»",
            kind: "æ°‘ä¿—æ–‡åŒ–æ´»å‹•",
            photos: []
          }
        ]
      },
      {
        id: "ahe_river_dragonboat",
        name: "æ„›æ²³ï¼ˆé¾èˆŸè³½å€ï¼‰",
        type: "æ²³ç•”é‹å‹•è³½äº‹",
        lat: 22.6305,
        lng: 120.2955,
        events: [
          {
            year: 2021,
            month: "11æœˆ",
            name: "åœ‹æ…¶é¾èˆŸå˜‰å¹´è¯",
            kind: "é‹å‹•è³½äº‹",
            photos: []
          }
        ]
      },
      {
        id: "kaohsiung_harbor_fireworks",
        name: "é«˜é›„æ¸¯ç£ï¼ˆåœ‹æ…¶ç…™ç«ï¼‰",
        type: "æ¸¯ç£æ™¯è§€ / åœ‹æ…¶ç…™ç«",
        lat: 22.613,
        lng: 120.285,
        events: [
          {
            year: 2021,
            month: "10æœˆ",
            name: "åœ‹æ…¶ç…™ç«åœ¨é«˜é›„",
            kind: "åœ‹å®¶æ…¶å…¸",
            photos: []
          }
        ]
      },
      {
        id: "weiwuying",
        name: "è¡›æ­¦ç‡Ÿéƒ½æœƒå…¬åœ’ / åœ‹å®¶è—è¡“æ–‡åŒ–ä¸­å¿ƒ",
        type: "è—æ–‡å ´é¤¨ / ç‡ˆæœƒä¸»å ´",
        lat: 22.6255,
        lng: 120.3452,
        events: [
          {
            year: 2022,
            month: "02æœˆ",
            name: "2022 å°ç£ç‡ˆæœƒï¼ˆé›™ä¸»å ´ä¹‹ä¸€ï¼‰",
            kind: "åœ‹éš›ç´šç¯€æ…¶",
            photos: []
          }
        ]
      },
      {
        id: "aozihdi",
        name: "å‡¹å­åº•æ£®æ—å…¬åœ’ï¼ˆè¬è–ç¯€å¤§éŠè¡Œï¼‰",
        type: "éƒ½æœƒå…¬åœ’ / ç¯€æ…¶éŠè¡Œ",
        lat: 22.6637,
        lng: 120.302,
        events: [
          {
            year: 2024,
            month: "10æœˆ",
            name: "è¬è–ç¯€å¤§éŠè¡Œï¼ˆèˆ‡é«˜æµä¸²è¯ï¼‰",
            kind: "ç¯€æ…¶éŠè¡Œ",
            photos: []
          }
        ]
      }
    ];

    // å¹´ä»½åˆ—è¡¨ï¼ˆä¾è³‡æ–™è‡ªå‹•æŠ“ï¼‰
    const allYears = Array.from(
      new Set(locations.flatMap((loc) => loc.events.map((e) => e.year)))
    ).sort();

    let activeYear = "all";
    let activeLocation = null;

    const locationNameEl = document.getElementById("locationName");
    const locationTypeEl = document.getElementById("locationType");
    const eventListEl = document.getElementById("eventList");
    const yearFiltersEl = document.getElementById("yearFilters");

    // ======== 2. å»ºç«‹å¹´ä»½ç¯©é¸ pill ========
    function renderYearFilters() {
      const years = ["all", ...allYears];
      yearFiltersEl.innerHTML = years
        .map((y) => {
          const label = y === "all" ? "å…¨éƒ¨å¹´ä»½" : `${y}`;
          const activeClass = y === activeYear ? "pill active" : "pill";
          return `<button class="${activeClass}" data-year="${y}">${label}</button>`;
        })
        .join("");

      yearFiltersEl.querySelectorAll("button").forEach((btn) => {
        btn.addEventListener("click", () => {
          activeYear = btn.dataset.year;
          renderYearFilters();
          if (activeLocation) renderLocation(activeLocation);
        });
      });
    }

    renderYearFilters();

    // ======== 3. åˆå§‹åŒ– Leaflet åœ°åœ– ========
    const map = L.map("map").setView([22.63, 120.30], 12);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19,
      attribution: "&copy; OpenStreetMap è²¢ç»è€…"
    }).addTo(map);

    function renderLocation(location) {
      activeLocation = location;

      locationNameEl.textContent = location.name;
      locationTypeEl.textContent = location.type;

      let events = [...location.events];

      // ä¾å¹´ä»½ç¯©é¸
      if (activeYear !== "all") {
        const y = Number(activeYear);
        events = events.filter((e) => e.year === y);
      }

      // ä¾æ™‚é–“æ’åºï¼šå¹´ä»½æ–°åˆ°èˆŠï¼ŒåŒå¹´å‰‡æŒ‰æœˆä»½å­—ä¸²æ’åº
      events.sort((a, b) => {
        if (a.year === b.year) return a.month.localeCompare(b.month);
        return b.year - a.year;
      });

      if (!events.length) {
        eventListEl.innerHTML =
          "<div class='hint'>æ­¤åœ°é»åœ¨é¸æ“‡çš„å¹´ä»½æ²’æœ‰ç™»éŒ„æ´»å‹•ï¼Œè©¦è©¦çœ‹å…¶ä»–å¹´ä»½æˆ–é¸ã€Œå…¨éƒ¨å¹´ä»½ã€ã€‚</div>";
        return;
      }

      eventListEl.innerHTML = events
        .map((ev) => {
          const photos =
            ev.photos && ev.photos.length
              ? ev.photos
              : [
                  // ç¯„ä¾‹åœ–ï¼šä½ å¯ä»¥æ”¹æˆå¯¦éš›æ´»å‹•ç…§ç‰‡ç¶²å€
                  "https://images.pexels.com/photos/167636/pexels-photo-167636.jpeg",
                  "https://images.pexels.com/photos/196652/pexels-photo-196652.jpeg"
                ];

          const photoHtml = photos
            .map(
              (url) =>
                `<div class="photo-thumb" style="background-image:url('${url}')"></div>`
            )
            .join("");

          return `
          <article class="event-card">
            <div class="event-header">
              <span class="event-date">${ev.year} å¹´ ${ev.month}</span>
              <span class="event-name">${ev.name}</span>
            </div>
            <div class="event-meta">
              <span class="tag">
                <span class="tag-dot"></span>
                <span>${ev.kind}</span>
              </span>
              <span class="tag">${location.name}</span>
            </div>
            <div class="photo-row">
              ${photoHtml}
            </div>
          </article>
        `;
        })
        .join("");
    }

    // ======== 4. å»ºç«‹åœ°åœ–æ¨™è¨˜ ========
    locations.forEach((loc) => {
      const marker = L.circleMarker([loc.lat, loc.lng], {
        radius: 8,
        fillColor: "#f97316",
        fillOpacity: 0.9,
        color: "#facc15",
        weight: 2
      }).addTo(map);

      marker.bindTooltip(`<span class="marker-label">${loc.name}</span>`, {
        permanent: false,
        direction: "top"
      });

      marker.on("click", () => {
        renderLocation(loc);
      });
    });

    // ä¸€é–‹å•Ÿå°±é è¨­é¸ã€Œæ„›æ²³ç£ã€
    renderLocation(locations[0]);
  </script>
</body>
</html>
