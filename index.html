<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>é«˜é›„ Â· é™³å…¶é‚å¸‚é•·ä»»å…§æ´»å‹•åœ°åœ–</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet åœ°åœ–å¥—ä»¶ -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <style>
    /* åœ°åœ–åœ–é‡˜ï¼ˆSVGï¼‰ */
.pin-icon {
  background: transparent;
  border: none;
}
.pin-icon svg {
  filter: drop-shadow(0 10px 10px rgba(64,59,51,0.25));
}

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "AR æµªæ¼«æ˜æœé«”", "Noto Serif TC", "Noto Sans TC",
        system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", serif;
      background: radial-gradient(
          circle at top left,
          rgba(220, 205, 196, 0.6),
          transparent 55%
        ),
        radial-gradient(
          circle at bottom right,
          rgba(182, 196, 201, 0.7),
          #f4f1ec
        );
      color: #3f3f46;
    }

    a {
      color: #9a8c98;
      text-decoration: none;
    }

    .app {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* ä¸Šæ–¹æ¨™é¡Œåˆ—ï¼ˆè«è˜­è¿ªå¥¶èŒ¶ï¼‹ç°ç²‰ï¼‰ */
    .header {
      padding: 10px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(148, 133, 121, 0.4);
      background: linear-gradient(
        to right,
        #d8c3a5,
        #e3d5ca,
        #c9ada7
      );
    }

    .header-left {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .site-title {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #403b33;
    }

    .site-subtitle {
      font-size: 12px;
      color: #5b5b63;
    }

    .badge {
      font-size: 11px;
      padding: 5px 11px;
      border-radius: 999px;
      border: 1px solid rgba(112, 99, 88, 0.5);
      background: rgba(244, 241, 236, 0.75);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #3f3f46;
      white-space: nowrap;
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #9a8c98;
      box-shadow: 0 0 0 3px rgba(154, 140, 152, 0.35);
    }

    /* ä¸»é«”ï¼šå·¦åœ°åœ–å³åˆ—è¡¨ */
    .main {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.35fr) minmax(0, 1.65fr);
      min-height: 0;
    }

    #map {
      height: 100%;
      width: 100%;
    }

    .map-wrapper {
      padding: 14px 14px 14px 18px;
    }

    .map-card {
      height: 100%;
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid rgba(148, 133, 121, 0.5);
      box-shadow: 0 20px 35px rgba(64, 59, 51, 0.25);
    }

    .sidebar {
      padding: 14px 18px 12px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid rgba(148, 133, 121, 0.45);
      background: linear-gradient(
        to bottom,
        rgba(244, 241, 236, 0.85),
        rgba(227, 213, 202, 0.85)
      );
    }

    .sidebar-header {
      margin-bottom: 8px;
    }

    .location-name {
      font-size: 17px;
      font-weight: 700;
      color: #5e503f;
      margin-bottom: 2px;
    }

    .location-type {
      font-size: 13px;
      color: #6b7280;
    }

    .hint {
      margin-top: 6px;
      font-size: 12px;
      color: #78716c;
    }

    .pill-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    /* å¹´ä»½é¸é …ï¼šè«è˜­è¿ªæ·ºè‰²èƒŒæ™¯ï¼‹æ·±è‰²å­—ï¼Œæ¸…æ¥šå¯è®€ */
    .pill {
      font-size: 11px;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid #c8b6a6;
      background: #e3d5ca;
      color: #403b33;
      cursor: pointer;
      transition: background 0.18s, border-color 0.18s, color 0.18s,
        transform 0.08s;
    }

    .pill:hover {
      transform: translateY(-1px);
      border-color: #9a8c98;
    }

    .pill.active {
      background: #c9ada7;
      border-color: #9a8c98;
      color: #2f2f30;
      font-weight: 600;
    }

    .event-list {
      margin-top: 8px;
      flex: 1;
      overflow-y: auto;
      padding-right: 4px;
    }

    .event-card {
      background: #fdfdfc;
      border-radius: 14px;
      padding: 10px 12px;
      margin-bottom: 10px;
      border: 1px solid rgba(200, 182, 166, 0.9);
      box-shadow: 0 12px 25px rgba(64, 59, 51, 0.12);
    }

    .event-header {
      display: flex;
      align-items: baseline;
      gap: 6px;
      margin-bottom: 4px;
    }

    .event-date {
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #d8e2dc;
      color: #344054;
      border: 1px solid #b5c3c7;
    }

    .event-name {
      font-size: 14px;
      font-weight: 600;
      color: #3b3a3a;
    }

    .event-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 12px;
      color: #6b6b6b;
      margin-bottom: 6px;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #c8b6a6;
      font-size: 11px;
      background: #f4f1ec;
    }

    .tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #9a8c98;
    }

    .photo-row {
      margin-top: 6px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(86px, 1fr));
      gap: 6px;
    }

    .photo-thumb {
      position: relative;
      width: 100%;
      padding-bottom: 65%;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid rgba(148, 133, 121, 0.85);
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
    }

    .photo-thumb::after {
      content: "é»æˆ‘æ›æˆæ´»å‹•ç…§ç‰‡";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #fdfdfc;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
      background: linear-gradient(
        to top,
        rgba(64, 59, 51, 0.9),
        rgba(64, 59, 51, 0.25)
      );
    }

    .footer {
      padding: 8px 18px 10px;
      font-size: 11px;
      color: #6b6b6b;
      border-top: 1px solid rgba(148, 133, 121, 0.5);
      background: #e3d5ca;
    }

    .marker-label {
      font-size: 12px;
      font-weight: 600;
      font-family: "AR æµªæ¼«æ˜æœé«”", "Noto Serif TC", serif;
      color: #403b33;
    }

    /* æ‰‹æ©Ÿ / å¹³æ¿ç‰ˆå‹ */
    @media (max-width: 960px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }

      .main {
        grid-template-columns: 1fr;
        grid-template-rows: minmax(260px, 46vh) minmax(0, 54vh);
      }

      .map-wrapper {
        padding: 10px 12px 6px;
      }

      .sidebar {
        border-left: none;
        border-top: 1px solid rgba(148, 133, 121, 0.45);
      }

      .location-name {
        font-size: 16px;
      }

      .event-card {
        padding: 8px 10px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- é ‚éƒ¨æ¨™é¡Œåˆ— -->
    <header class="header">
      <div class="header-left">
        <div class="site-title">KAOHSIUNG EVENTS MAP</div>
        <div class="site-subtitle">
          é™³å…¶é‚å¸‚é•·ä»»å…§ Â· 2020â€“2026 é«˜é›„é‡è¦æ´»å‹•ã€æ¼”å”±æœƒèˆ‡ IP å±•è¦½
        </div>
      </div>
      <div class="badge">
        <span class="badge-dot"></span>
        <span>äº’å‹•åœ°åœ–ï½œé»åœ°æ¨™çœ‹æ­·å¹´æ´»å‹•</span>
      </div>
    </header>

    <!-- ä¸»ç•«é¢ -->
    <div class="main">
      <div class="map-wrapper">
        <div class="map-card">
          <div id="map"></div>
        </div>
      </div>

      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="location-name" id="locationName">
            è«‹å…ˆé»åœ°åœ–ä¸Šçš„åœ°é»æ¨™è¨˜
          </div>
          <div class="location-type" id="locationType">
            æ„›æ²³ç£ã€é§äºŒã€é«˜æµã€å¤¢æ™‚ä»£ã€ä¸–é‹ã€é«˜é›„å·¨è›‹â€¦ç­‰æ´»å‹•å ´åœ°ä¸€è¦½
          </div>
          <div class="hint">
            ğŸ” å°æŠ€å·§ï¼šå¯ä»¥å…ˆé¸å¹´ä»½ï¼Œå†é»åœ°åœ–ä¸Šçš„åœ°é»ï¼Œå°±æœƒåªé¡¯ç¤ºè©²å¹´åº¦çš„æ´»å‹•ã€‚
          </div>

          <!-- å¹´ä»½ç¯©é¸ -->
          <div class="pill-row" id="yearFilters"></div>
        </div>

        <div class="event-list" id="eventList"></div>
      </aside>
    </div>

    <footer class="footer">
      æ´»å‹•è³‡æ–™ä¾ç…§ 2020â€“2026/01/01 é«˜é›„å¸‚å®˜æ–¹å°å¤–å®£å‚³ä¹‹ä¸»è¦æ´»å‹•æ•´ç†ï¼šè·¨å¹´ã€ç‡ˆæœƒã€æ¼”å”±æœƒã€
      IP å±•ã€è¦ªå­è§€å…‰èˆ‡ç¯€æ…¶æ´»å‹•ã€‚<br />
      åœ°åœ–ï¼šOpenStreetMap + Leafletã€‚åœ°é»åº§æ¨™ç‚ºè¿‘ä¼¼ä½ç½®ï¼Œå¯ä¾éœ€æ±‚å†å¾®èª¿ã€‚
    </footer>
  </div>

  <script>
    // ========= 1. æ´»å‹•è³‡æ–™ =========
    // å®Œæ•´ä¾ç…§ä½ æä¾›çš„è¡¨æ ¼ï¼Œä¸¦æŒ‰åœ°é»æ•´ç†
    const locations = [
      {
        id: "meinong",
        name: "ç¾æ¿ƒå®¢å®¶æ–‡ç‰©é¤¨",
        type: "å®¢åº„æ™¯é»ãƒ»æ°‘ä¿—æ–‡åŒ–æ´»å‹•å ´åœ°",
        lat: 22.9005,
        lng: 120.542,
        events: [
          {
            year: 2020,
            month: "10æœˆ",
            name: "å¥½å®¢æ—…éŠå»",
            kind: "æ°‘ä¿—æ–‡åŒ–",
            photos: []
          }
        ]
      },
      {
        id: "love_river_bay",
        name: "æ„›æ²³ç£",
        type: "æ°´å²¸æ™¯è§€ãƒ»å¤§å‹æ´»å‹•ä¸»å ´åœ°",
        lat: 22.6178,
        lng: 120.2889,
        events: [
          {
            year: 2020,
            month: "12æœˆ",
            name: "è·¨ç™¾å…‰å¹´è·¨å¹´æ™šæœƒ",
            kind: "ç¯€æ…¶ï¼ˆå¸‚é•·é¦–å ´è·¨å¹´ï¼‰",
            photos: []
          },
          {
            year: 2021,
            month: "05æœˆ",
            name: "é«˜é›„æµ·æ´‹æ´¾å°",
            kind: "æ°´åŸŸä¼‘é–’",
            photos: []
          },
          {
            year: 2022,
            month: "02æœˆ",
            name: "2022 å°ç£ç‡ˆæœƒï¼ˆé›™ä¸»å ´ä¹‹ä¸€ï¼‰",
            kind: "åœ‹éš›ç´šç¯€æ…¶",
            photos: []
          },
          {
            year: 2022,
            month: "08æœˆ",
            name: "å°ç£æ–‡åšæœƒï¼ˆèŠç™‚æ¼‚æ¼‚æ²³ï¼‰",
            kind: "è—æ–‡ IP",
            photos: []
          },
          {
            year: 2024,
            month: "01æœˆ",
            name: "å†¬æ—¥éŠæ¨‚åœ’ï¼ˆé»ƒè‰²å°é´¨å›æ­¸ï¼‰",
            kind: "åœ‹éš›äº®é» IP",
            photos: []
          },
          {
            year: 2025,
            month: "02æœˆ",
            name: "å†¬æ—¥éŠæ¨‚åœ’ï¼ˆå‰ä¼Šå¡å“‡ï¼Œèˆ‡é§äºŒä¸²è¯ï¼‰",
            kind: "ç™‚ç™’ IP å±•",
            photos: []
          }
        ]
      },
      {
        id: "kaohsiung_music_center",
        name: "é«˜é›„æµè¡ŒéŸ³æ¨‚ä¸­å¿ƒï¼ˆé«˜æµï¼‰",
        type: "æµè¡ŒéŸ³æ¨‚å ´é¤¨ãƒ»æµ·éŸ³é¤¨",
        lat: 22.6169,
        lng: 120.2874,
        events: [
          {
            year: 2020,
            month: "12æœˆ",
            name: "è·¨ç™¾å…‰å¹´è·¨å¹´æ™šæœƒï¼ˆé«˜æµèˆå°ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2021,
            month: "12æœˆ",
            name: "2022 é«˜é›„è·¨å¹´ï¼ˆé›™èˆå°ä¹‹ä¸€ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2022,
            month: "08æœˆ",
            name: "å°ç£æ–‡åšæœƒï¼ˆéƒ¨åˆ†å±•å€ï¼‰",
            kind: "è—æ–‡ IP",
            photos: []
          },
          {
            year: 2022,
            month: "10æœˆ",
            name: "Takao Rock æ‰“ç‹—ç¥­",
            kind: "éŸ³æ¨‚ç¥­",
            photos: []
          },
          {
            year: 2024,
            month: "10æœˆ",
            name: "æ‰“ç‹—ç¥­",
            kind: "éŸ³æ¨‚ç¥­",
            photos: []
          },
          {
            year: 2024,
            month: "10æœˆ",
            name: "è¬è–ç¯€å¤§éŠè¡Œï¼ˆèˆ‡å‡¹å­åº•ä¸²è¯ï¼‰",
            kind: "éŸ³æ¨‚ / ç¯€æ…¶",
            photos: []
          },
          {
            year: 2025,
            month: "10æœˆ",
            name: "2025 æ‰“ç‹—ç¥­",
            kind: "éŸ³æ¨‚ç¥­",
            photos: []
          },
          {
            year: 2026,
            month: "01æœˆ",
            name: "2026 å…ƒæ—¦å‡æ—— / æ™¨æ›¦æ¼”å”±æœƒ",
            kind: "ç¯€æ…¶",
            photos: []
          }
        ]
      },
      {
        id: "penglai",
        name: "è“¬èŠå•†æ¸¯å€",
        type: "æ¸¯å€ãƒ»è¨­è¨ˆèˆ‡è·¨å¹´èˆå°",
        lat: 22.6199,
        lng: 120.2817,
        events: [
          {
            year: 2020,
            month: "12æœˆ",
            name: "è·¨ç™¾å…‰å¹´è·¨å¹´æ™šæœƒï¼ˆè“¬èŠå•†æ¸¯èˆå°ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2021,
            month: "12æœˆ",
            name: "2022 é«˜é›„è·¨å¹´ï¼ˆè“¬èŠèˆå°ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2022,
            month: "10æœˆ",
            name: "å°ç£è¨­è¨ˆå±•ï¼ˆè¨­è¨ˆä¸­å³¶ï¼‰",
            kind: "è—æ–‡è¨­è¨ˆ",
            photos: []
          }
        ]
      },
      {
        id: "kaohsiung_harbor",
        name: "é«˜é›„æ¸¯ç£",
        type: "æ¸¯ç£æ™¯è§€ãƒ»åœ‹æ…¶ç…™ç«æ–½æ”¾åœ°",
        lat: 22.613,
        lng: 120.285,
        events: [
          {
            year: 2021,
            month: "10æœˆ",
            name: "åœ‹æ…¶ç…™ç«åœ¨é«˜é›„",
            kind: "åœ‹å®¶æ…¶å…¸",
            photos: []
          }
        ]
      },
      {
        id: "love_river",
        name: "æ„›æ²³ï¼ˆé¾èˆŸè³½å€ï¼‰",
        type: "æ²³ç•”ãƒ»é‹å‹•è³½äº‹å ´åœ°",
        lat: 22.6305,
        lng: 120.2955,
        events: [
          {
            year: 2021,
            month: "11æœˆ",
            name: "åœ‹æ…¶é¾èˆŸå˜‰å¹´è¯",
            kind: "é‹å‹•è³½äº‹",
            photos: []
          }
        ]
      },
      {
        id: "dream_mall",
        name: "å¤¢æ™‚ä»£ / æ™‚ä»£å¤§é“",
        type: "å•†åœˆãƒ»è·¨å¹´èˆ‡éŸ³æ¨‚ç¥­å ´åœ°",
        lat: 22.59515,
        lng: 120.30692,
        events: [
          {
            year: 2022,
            month: "12æœˆ",
            name: "2023 è·¨å¹´äºç£æœªä¾†å¸‚",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "12æœˆ",
            name: "2024 è·¨å¹´æ™šæœƒ",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "03æœˆ",
            name: "é«˜é›„æ«»èŠ±å­£",
            kind: "éŸ³æ¨‚ç¥­ / èŠ±å­£æ´»å‹•",
            photos: []
          },
          {
            year: 2024,
            month: "07æœˆ",
            name: "é«˜é›„å•¤é…’éŸ³æ¨‚ç¯€",
            kind: "å•†æ¥­ç¥­å…¸",
            photos: []
          },
          {
            year: 2025,
            month: "03æœˆ",
            name: "2025 é«˜é›„æ«»èŠ±å­£",
            kind: "éŸ³æ¨‚ç¯€",
            photos: []
          },
          {
            year: 2025,
            month: "01æœˆ",
            name: "2025 è·¨å¹´æ™šæœƒ",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          },
          {
            year: 2025,
            month: "12æœˆ",
            name: "2026 è·¨å¹´é›„å—¨è¶´ï¼ˆ2å¤©å‰æš–èº«ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ",
            photos: []
          }
        ]
      },
      {
        id: "city_hall",
        name: "é«˜é›„å¸‚æ”¿åºœï¼ˆå››ç¶­è¡Œæ”¿ä¸­å¿ƒï¼‰",
        type: "å¸‚åºœå»£å ´ãƒ»å…¸ç¦®",
        lat: 22.623,
        lng: 120.314,
        events: [
          {
            year: 2025,
            month: "01æœˆ",
            name: "2025 å…ƒæ—¦å‡æ——ï¼ˆèˆ‡å¤¢æ™‚ä»£è·¨å¹´ä¸²è¯ï¼‰",
            kind: "ç¯€æ…¶æ™šæœƒ / å…¸ç¦®",
            photos: []
          }
        ]
      },
      {
        id: "arena",
        name: "é«˜é›„å·¨è›‹",
        type: "å®¤å…§é«”è‚²é¤¨ãƒ»å¤§å‹æ¼”å”±æœƒå ´åœ°",
        lat: 22.6692,
        lng: 120.3017,
        events: [
          {
            year: 2023,
            month: "02æœˆ",
            name: "Westlife & Backstreet Boys",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "04æœˆ",
            name: "å¼µæƒ å¦¹ ASMR æ¼”å”±æœƒ",
            kind: "éŸ³æ¨‚æ…¶å…¸",
            photos: []
          },
          {
            year: 2026,
            month: "01æœˆ",
            name: "Super Junior SS10ï¼ˆé è¨ˆï¼‰",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          }
        ]
      },
      {
        id: "world_games_stadium",
        name: "ä¸–é‹ä¸»å ´é¤¨ï¼ˆåœ‹å®¶é«”è‚²å ´ï¼‰",
        type: "æˆ¶å¤–é«”è‚²å ´ãƒ»åœ‹éš›æ¼”å”±æœƒå ´åœ°",
        lat: 22.7023,
        lng: 120.2947,
        events: [
          {
            year: 2023,
            month: "02æœˆ",
            name: "Westlife & Backstreet Boysï¼ˆä¸–é‹å ´ï¼‰",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "03æœˆ",
            name: "BLACKPINK / äº”æœˆå¤©",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2023,
            month: "11æœˆ",
            name: "Coldplay æ¼”å”±æœƒ",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "02æœˆ",
            name: "Ed Sheeran ç´…é«®è‰¾å¾·",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "03æœˆ",
            name: "äº”æœˆå¤©ï¼ˆé«˜é›„æ«»èŠ±å­£ä¸–é‹å ´ï¼‰",
            kind: "æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "04æœˆ",
            name: "Golden Wave in Taiwan",
            kind: "éŸ“æµæ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "09æœˆ",
            name: "Bruno Mars ç«æ˜Ÿäººå¸ƒé­¯è«¾",
            kind: "åœ‹éš›æ¼”å”±æœƒ",
            photos: []
          },
          {
            year: 2024,
            month: "11æœˆ",
            name: "Stray Kids ä¸–ç•Œå·¡è¿´",
            kind: "éŸ“æµæ¼”å”±æœƒ",
            photos: []
          }
        ]
      },
      {
        id: "pier2",
        name: "é§äºŒè—è¡“ç‰¹å€",
        type: "æ¸¯å€è—æ–‡åœ’å€",
        lat: 22.6205,
        lng: 120.2799,
        events: [
          {
            year: 2023,
            month: "04æœˆ",
            name: "å¤§æ¸¯é–‹å”± 2023",
            kind: "éŸ³æ¨‚æ…¶å…¸",
            photos: []
          },
          {
            year: 2024,
            month: "12æœˆ",
            name: "é­·é­šéŠæˆ²é€²é§é«˜é›„",
            kind: "åœ‹éš› IP å¿«é–ƒ",
            photos: []
          },
          {
            year: 2025,
            month: "02æœˆ",
            name: "å†¬æ—¥éŠæ¨‚åœ’ï¼ˆå‰ä¼Šå¡å“‡ï¼Œèˆ‡æ„›æ²³ç£ä¸²è¯ï¼‰",
            kind: "ç™‚ç™’ IP å±•",
            photos: []
          },
          {
            year: 2025,
            month: "03æœˆ",
            name: "2025 å¤§æ¸¯é–‹å”±",
            kind: "éŸ³æ¨‚ç¥­",
            photos: []
          }
        ]
      },
      {
        id: "qijin",
        name: "æ——æ´¥ / æ——æ´¥æµ·æ°´æµ´å ´",
        type: "æµ·æ°´æµ´å ´ãƒ»è¦ªå­è§€å…‰æ´»å‹•",
        lat: 22.61018,
        lng: 120.2669,
        events: [
          {
            year: 2023,
            month: "08æœˆ",
            name: "æ——æ´¥é¢¨ç®ç¯€",
            kind: "è¦ªå­è§€å…‰",
            photos: []
          },
          {
            year: 2025,
            month: "08æœˆ",
            name: "æ——æ´¥é¢¨ç®ç¯€æš¨æ°£å¢Šæ°´æ¨‚åœ’",
            kind: "æš‘å‡æ´»å‹•",
            photos: []
          }
        ]
      },
      {
        id: "central_park",
        name: "é«˜é›„ä¸­å¤®å…¬åœ’",
        type: "åŸå¸‚ç¶ åœ°ãƒ»ç¯€æ…¶é»ç‡ˆå ´åœ°",
        lat: 22.6246,
        lng: 120.3006,
        events: [
          {
            year: 2024,
            month: "12æœˆ",
            name: "2025 è–èª•ç”Ÿæ´»ç¯€",
            kind: "ç¯€æ…¶é»ç‡ˆ",
            photos: []
          }
        ]
      },
      {
        id: "kaohsiung_station",
        name: "é«˜é›„è»Šç«™ï¼ˆé å®šåœ°ï¼‰",
        type: "äº¤é€šæ¨ç´ãƒ»IP å±•è¦½é å®šå ´åœ°",
        lat: 22.6393,
        lng: 120.302,
        events: [
          {
            year: 2025,
            month: "11æœˆ",
            name: "100% å“†å•¦Aå¤¢ç‰¹å±•ï¼ˆé å®šåœ°é»ï¼‰",
            kind: "IP ç‰¹å±•",
            photos: []
          }
        ]
      },
      {
        id: "weiwuying",
        name: "è¡›æ­¦ç‡Ÿéƒ½æœƒå…¬åœ’ / åœ‹å®¶è—è¡“æ–‡åŒ–ä¸­å¿ƒ",
        type: "è—æ–‡å ´é¤¨ãƒ»ç‡ˆæœƒä¸»å ´",
        lat: 22.6255,
        lng: 120.3452,
        events: [
          {
            year: 2022,
            month: "02æœˆ",
            name: "2022 å°ç£ç‡ˆæœƒï¼ˆé›™ä¸»å ´ä¹‹ä¸€ï¼‰",
            kind: "åœ‹éš›ç´šç¯€æ…¶",
            photos: []
          }
        ]
      },
      {
        id: "aozihdi",
        name: "å‡¹å­åº•æ£®æ—å…¬åœ’",
        type: "éƒ½æœƒå…¬åœ’ãƒ»ç¯€æ…¶éŠè¡Œå ´åœ°",
        lat: 22.6637,
        lng: 120.302,
        events: [
          {
            year: 2024,
            month: "10æœˆ",
            name: "è¬è–ç¯€å¤§éŠè¡Œï¼ˆèˆ‡é«˜æµä¸²è¯ï¼‰",
            kind: "éŸ³æ¨‚ / ç¯€æ…¶",
            photos: []
          }
        ]
      }
    ];

    // å¹´ä»½åˆ—è¡¨ï¼ˆè‡ªå‹•æŠ“ï¼‰
    const allYears = Array.from(
      new Set(locations.flatMap((loc) => loc.events.map((e) => e.year)))
    ).sort();

    let activeYear = "all";
    let activeLocation = null;
function getAvailableYears() {
  // ä¾ç›®å‰åœ°é»ç¯„åœè¨ˆç®—ã€Œæœ‰å“ªäº›å¹´ä»½çœŸçš„æœ‰æ´»å‹•ã€
  let list = EVENTS;
  if (activePlace !== "all") {
    list = list.filter(e => e.places.includes(activePlace));
  }
  return Array.from(new Set(list.map(e => e.year))).sort();
}

function ensureActiveYearValid() {
  const years = getAvailableYears();
  if (activeYear !== "all" && !years.includes(Number(activeYear))) {
    activeYear = "all";
  }
}
    
    const locationNameEl = document.getElementById("locationName");
    const locationTypeEl = document.getElementById("locationType");
    const eventListEl = document.getElementById("eventList");
    const yearFiltersEl = document.getElementById("yearFilters");

    // ========= 2. å¹´ä»½ç¯©é¸ pill =========
function renderYearFilters() {
  ensureActiveYearValid();

  const years = getAvailableYears();
  const yearButtons = ["all", ...years];

  yearFiltersEl.innerHTML = yearButtons.map(y => {
    const label = y === "all" ? "å…¨éƒ¨å¹´ä»½" : String(y);
    const cls = (String(y) === String(activeYear)) ? "pill active" : "pill";
    return `<button class="${cls}" data-year="${y}">${label}</button>`;
  }).join("");

  yearFiltersEl.querySelectorAll("button").forEach(btn => {
    btn.addEventListener("click", () => {
      activeYear = btn.dataset.year;
      renderYearFilters();
      renderEvents();
    });
  });
}


    // ========= 3. åˆå§‹åŒ–åœ°åœ– =========
    const map = L.map("map").setView([22.63, 120.30], 12);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19,
      attribution: "&copy; OpenStreetMap è²¢ç»è€…"
    }).addTo(map);

    function renderLocation(location) {
      activeLocation = location;
      locationNameEl.textContent = location.name;
      locationTypeEl.textContent = location.type;

      let events = [...location.events];

      if (activeYear !== "all") {
        const y = Number(activeYear);
        events = events.filter((e) => e.year === y);
      }

      events.sort((a, b) => {
        if (a.year === b.year) return a.month.localeCompare(b.month);
        return b.year - a.year;
      });

      if (!events.length) {
        eventListEl.innerHTML =
          "<div class='hint'>æ­¤åœ°é»åœ¨é¸æ“‡çš„å¹´ä»½æ²’æœ‰æ´»å‹•ç´€éŒ„ï¼Œå¯ä»¥è©¦è©¦çœ‹å…¶ä»–å¹´ä»½æˆ–é¸ã€Œå…¨éƒ¨å¹´ä»½ã€ã€‚</div>";
        return;
      }

      eventListEl.innerHTML = events
        .map((ev) => {
          const photos =
            ev.photos && ev.photos.length
              ? ev.photos
              : [
                  "https://images.pexels.com/photos/167636/pexels-photo-167636.jpeg",
                  "https://images.pexels.com/photos/196652/pexels-photo-196652.jpeg"
                ];

          const photoHtml = photos
            .map(
              (url) =>
                `<div class="photo-thumb" style="background-image:url('${url}')"></div>`
            )
            .join("");

          return `
            <article class="event-card">
              <div class="event-header">
                <span class="event-date">${ev.year} å¹´ ${ev.month}</span>
                <span class="event-name">${ev.name}</span>
              </div>
              <div class="event-meta">
                <span class="tag">
                  <span class="tag-dot"></span>
                  <span>${ev.kind}</span>
                </span>
                <span class="tag">${location.name}</span>
              </div>
              <div class="photo-row">
                ${photoHtml}
              </div>
            </article>
          `;
        })
        .join("");
    }

    // ========= 4. å»ºç«‹æ¨™è¨˜ =========
    locations.forEach((loc) => {
     // åœ–é‡˜ iconï¼šç”¨ SVGï¼ˆä¸ç”¨ä¾è³´ Leaflet é è¨­åœ–ç‰‡ï¼ŒGitHub Pages ä¸æœƒæ‰¾ä¸åˆ°åœ–ï¼‰
const PIN_ICON = L.divIcon({
  className: "pin-icon",
  html: `
    <svg width="28" height="44" viewBox="0 0 28 44" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M14 43C14 43 3 28.7 3 18C3 10.8 8.1 5 14 5C19.9 5 25 10.8 25 18C25 28.7 14 43 14 43Z"
            fill="#c9ada7" stroke="#9a8c98" stroke-width="2"/>
      <circle cx="14" cy="18" r="6" fill="#f4f1ec" stroke="#9a8c98" stroke-width="2"/>
    </svg>
  `,
  iconSize: [28, 44],
  iconAnchor: [14, 44],
  tooltipAnchor: [0, -34]
});

// åªæœ‰è¢«æ´»å‹•ç”¨åˆ°çš„åœ°é»æ‰ç•« marker
const usedPlaceIds = new Set(EVENTS.flatMap(e => e.places));

PLACES.filter(p => usedPlaceIds.has(p.id)).forEach(p => {
  const marker = L.marker([p.lat, p.lng], { icon: PIN_ICON }).addTo(map);
  marker.bindTooltip(p.name, { direction: "top" });

  marker.on("click", () => {
    activePlace = p.id;
    renderYearFilters();   // â˜… æ–°å¢ï¼šåœ°é»åˆ‡æ›å¾Œï¼Œå¹´ä»½é¸é …é‡æ–°è¨ˆç®—
    renderEvents();
  });
});

    // é è¨­é¸æ“‡ç¬¬ä¸€å€‹åœ°é»
    renderLocation(locations[0]);
  </script>
</body>
</html>




